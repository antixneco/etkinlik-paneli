<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Etkinlik Paneli</title>
</head>
<body>
    <h1>Etkinlik KatÄ±lÄ±m Paneli</h1>
    <p>Buraya az sonra form ve katÄ±lÄ±mcÄ± listesi gelecek.</p>
    <h2>Etkinlik KatÄ±lÄ±m Formu</h2>
<form id="katilimForm">
    <label>Ad Soyad:</label><br>
    <input type="text" name="adSoyad" required><br><br>

    <label>Plaket alÄ±yor mu?</label><br>
    <select name="plaket" required>
        <option value="">SeÃ§iniz</option>
        <option value="Evet">Evet</option>
        <option value="HayÄ±r">HayÄ±r</option>
    </select><br><br>

    <label>YanÄ±nda kimler geliyor?</label><br>
    <input type="text" name="yaninda" placeholder="EÅŸ, Ã‡ocuk, Misafir sayÄ±sÄ±"><br><br>

    <label>Konaklama istiyor mu?</label><br>
    <select name="konaklama" required>
        <option value="">SeÃ§iniz</option>
        <option value="Evet">Evet</option>
        <option value="HayÄ±r">HayÄ±r</option>
    </select><br><br>

    <label>Konaklayacak kiÅŸi sayÄ±sÄ±:</label><br>
    <input type="number" name="konaklamaSayisi" min="0"><br><br>

    <button type="submit">GÃ¶nder</button>
</form>

<h2>KatÄ±lÄ±mcÄ± Listesi</h2>
<table id="katilimTablo" border="1" style="border-collapse: collapse; width: 100%;">
    <tr>
        <th>Ad Soyad</th>
        <th>Plaket</th>
        <th>YanÄ±nda</th>
        <th>Konaklama</th>
        <th>Konaklayacak kiÅŸi sayÄ±sÄ±</th>
    </tr>
</table>
    <button id="indirBtn">KatÄ±lÄ±mcÄ±larÄ± CSV Olarak Ä°ndir</button>

<script>
// ===== Formdan tabloya veri ekleme =====
document.getElementById('katilimForm').addEventListener('submit', function(e) {
    e.preventDefault(); // Sayfa yenilenmesin

    const adSoyad = this.querySelector('input[name="adSoyad"]').value;
    const plaket = this.querySelector('select[name="plaket"]').value;
    const yaninda = this.querySelector('input[name="yaninda"]').value;
    const konaklama = this.querySelector('select[name="konaklama"]').value;
    const konaklamaSayisi = this.querySelector('input[name="konaklamaSayisi"]').value;

    const tablo = document.getElementById('katilimTablo');
    const yeniSatir = tablo.insertRow();
    yeniSatir.insertCell(0).innerText = adSoyad;
    yeniSatir.insertCell(1).innerText = plaket;
    yeniSatir.insertCell(2).innerText = yaninda;
    yeniSatir.insertCell(3).innerText = konaklama;
    yeniSatir.insertCell(4).innerText = konaklamaSayisi;

    this.reset();
});

// ===== CSV indirme =====
document.getElementById('indirBtn').addEventListener('click', function() {
    const tablo = document.getElementById('katilimTablo');
    let csv = [];

    for (let i = 0; i < tablo.rows.length; i++) {
        let satir = [];
        for (let j = 0; j < tablo.rows[i].cells.length; j++) {
            let hucre = tablo.rows[i].cells[j].innerText.replace(/"/g, '""'); 
            satir.push(`"${hucre}"`);
        }
        csv.push(satir.join(",")); 
    }

    const csvString = "\uFEFF" + csv.join("\n");
    const csvDosya = new Blob([csvString], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(csvDosya);

    const a = document.createElement('a');
    a.href = url;
    a.download = 'katilim.csv';
    document.body.appendChild(a); // ğŸ‘ˆ burada geÃ§ici olarak DOMâ€™a ekliyoruz
    a.click();
    document.body.removeChild(a); // ğŸ‘ˆ sonra kaldÄ±rÄ±yoruz
    URL.revokeObjectURL(url);
});
</script>


</body>
    
</html>
