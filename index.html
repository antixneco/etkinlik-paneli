<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Etkinlik Paneli</title>
</head>
<body>
    <h1>Etkinlik Katılım Paneli</h1>
    <p>Buraya az sonra form ve katılımcı listesi gelecek.</p>
    <h2>Etkinlik Katılım Formu</h2>
<form id="katilimForm">
    <label>Ad Soyad:</label><br>
    <input type="text" name="adSoyad" required><br><br>

    <label>Plaket alıyor mu?</label><br>
    <select name="plaket" required>
        <option value="">Seçiniz</option>
        <option value="Evet">Evet</option>
        <option value="Hayır">Hayır</option>
    </select><br><br>

    <label>Yanında kimler geliyor?</label><br>
    <input type="text" name="yaninda" placeholder="Eş, Çocuk, Misafir sayısı"><br><br>

    <label>Konaklama istiyor mu?</label><br>
    <select name="konaklama" required>
        <option value="">Seçiniz</option>
        <option value="Evet">Evet</option>
        <option value="Hayır">Hayır</option>
    </select><br><br>

    <label>Konaklayacak kişi sayısı:</label><br>
    <input type="number" name="konaklamaSayisi" min="0"><br><br>

    <button type="submit">Gönder</button>
</form>

<h2>Katılımcı Listesi</h2>
<table id="katilimTablo" border="1" style="border-collapse: collapse; width: 100%;">
    <tr>
        <th>Ad Soyad</th>
        <th>Plaket</th>
        <th>Yanında</th>
        <th>Konaklama</th>
        <th>Konaklayacak kişi sayısı</th>
    </tr>
</table>
    <button id="indirBtn">Katılımcıları CSV Olarak İndir</button>

<script>
document.getElementById('katilimForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const adSoyad = this.querySelector('input[name="adSoyad"]').value;
    const plaket = this.querySelector('select[name="plaket"]').value;
    const yaninda = this.querySelector('input[name="yaninda"]').value;
    const konaklama = this.querySelector('select[name="konaklama"]').value;
    const konaklamaSayisi = this.querySelector('input[name="konaklamaSayisi"]').value;

    const tablo = document.getElementById('katilimTablo');
    const yeniSatir = tablo.insertRow();
    yeniSatir.insertCell(0).innerText = adSoyad;
    yeniSatir.insertCell(1).innerText = plaket;
    yeniSatir.insertCell(2).innerText = yaninda;
    yeniSatir.insertCell(3).innerText = konaklama;
    yeniSatir.insertCell(4).innerText = konaklamaSayisi;

    this.reset();
});
document.getElementById('indirBtn').addEventListener('click', function() {
    const tablo = document.getElementById('katilimTablo');
    let csv = [];
    
    // Tablodaki satırları oku
    for (let i = 0; i < tablo.rows.length; i++) {
        let satir = [];
        for (let j = 0; j < tablo.rows[i].cells.length; j++) {
            satir.push(tablo.rows[i].cells[j].innerText);
        }
        csv.push(satir.join(",")); // Hücreleri virgülle ayır
    }

// CSV dosyasını oluştur
const bom = "\uFEFF"; // BOM ekliyoruz
const csvDosya = new Blob([bom + csv.join("\n")], { type: 'text/csv;charset=utf-8;' });


    // Geçici link ile indir
    const a = document.createElement('a');
    a.href = url;
    a.download = 'katilim.csv';
    a.click();
    URL.revokeObjectURL(url);
});
</script>



</body>
    
</html>
